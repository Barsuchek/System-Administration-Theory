# IP-Телефония

## Что это?
Когда через браузер вы заходите на какой-либо сайт, браузер обращается по имени сайта, преобразует его в IP адрес, упаковывает его в пакет и отправляет на сервер по протоколу HTTPS.

IP-телефония это тоже самое, только вместо протокола HTTPS, используется протокол SIP. 

А пакеты с информацией наполнены данными с тем, кто и куда звонит.

При звонке через IP телефонию, голос передается через пакеты, но по протоколу RTP(Real-time Transport Protocol).

Звонки через сеть передачи данных работают в рамках модели OSI, но используют отдельный набор протоколов и стандартов.

VoIP(передача голоса поверх протокола IP) и IP-телефония – это одно и тоже.

**Пример:**
Допустим Вы хотите позвонить какому-либо абоненту.

Ваш телефон отправляет специальное сообщение INVITE на IP-ATC, IP-ATC отправляет ответ телефону(это сообщение называется 100 Trying).

Формально оно означает - инвайт получен, пытаюсь дозвониться до абонента, больше инвайтов не присылай.

IP-ATC ищет адрес абонента и когда находит, отправляет INVITE на его телефон.
Телефон абонента отправляет сообщение(180 Ringing) обратно на Ваш телефон через IP-ATC, в этот момент Вы слышите гудки. 

Как только абонент взял трубку, телефон абонента отправляет сообщение(200 OK) через IP-ATC.

Получив сообщение, Ваш телефон отправляет сообщение(ASK) напрямую на телефон абонента.

В этот момент между телефонами устанавливается RTP соединение и Вы начинаете общаться голосом с абонентом.

Когда один из собеседников бросает трубку, то телефон, с которого сбросили звонок, отправляет абоненту сообщение(BYE) напрямую на телефон абонента, Ваш телефон отправляет абоненту сообщение(200 ОК).

**Какие преимущества у IP-телефонии в сравнении с аналоговой связью:**
1. Экономия денег(обслуживание гораздо дешевле, так как общение осуществляется через интернет)
2. Новый функционал(Запись звонков, видеозвонки, конференции, интеграция с CRM, API)
3. Простое обслуживание(есть интерфейс для настройки нужных функций)
